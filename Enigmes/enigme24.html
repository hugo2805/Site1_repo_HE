<link rel="stylesheet" type="text/css" href="../css/default.css">


<div class="parchemin"> 
    <p>
        Quel bout de bois, devez-vous déplacer pourque l’opération soit juste ?
    </p>
</div>
    
    <div id="content" style="display: flex;">
        <img src="../Images/allumette.png" id="m1" style="top:70vw;left:10vw;transform:rotate(-90deg);" class="matchstick" ontouchstart="SwitchObjectDragged(this.id, true)" ontouchend="SwitchObjectDragged(this.id, false)">
        <img src="../Images/allumette.png" id="m2" style="top:70vw;left: 19vw;transform:rotate(250deg);" class="matchstick" ontouchstart="SwitchObjectDragged(this.id, true)" ontouchend="SwitchObjectDragged(this.id, false)">
        <img src="../Images/allumette.png" id="m3" style="top:70vw;left:26vw;transform:rotate(-70deg);" class="matchstick" ontouchstart="SwitchObjectDragged(this.id, true)" ontouchend="SwitchObjectDragged(this.id, false)">
        <img src="../Images/allumette.png" id="m4" style="top:70vw;left:42vw;transform:rotate(180deg);" class="matchstick" ontouchstart="SwitchObjectDragged(this.id, true)" ontouchend="SwitchObjectDragged(this.id, false)">
        <img src="../Images/allumette.png" id="m5" style="top:70vw;left:60vw;transform:rotate(-90deg);" class="matchstick" ontouchstart="SwitchObjectDragged(this.id, true)" ontouchend="SwitchObjectDragged(this.id, false)">
        <img src="../Images/allumette.png" id="m6" style="top:70vw;left:70vw;transform:rotate(-90deg);" class="matchstick" ontouchstart="SwitchObjectDragged(this.id, true)" ontouchend="SwitchObjectDragged(this.id, false)">
        <img src="../Images/allumette.png" id="m7" style="top:100vw;left:30vw;transform:rotate(180deg);" class="matchstick" ontouchstart="SwitchObjectDragged(this.id, true)" ontouchend="SwitchObjectDragged(this.id, false)">
        <img src="../Images/allumette.png" id="m8" style="top:105vw;left:30vw;transform:rotate(180deg);" class="matchstick" ontouchstart="SwitchObjectDragged(this.id, true)" ontouchend="SwitchObjectDragged(this.id, false)">
        <img src="../Images/allumette.png" id="m9" style="top:100vw;left:56vw;transform:rotate(-70deg);" class="matchstick" ontouchstart="SwitchObjectDragged(this.id, true)" ontouchend="SwitchObjectDragged(this.id, false)">
        <img src="../Images/allumette.png" id="m10" style="top:100vw;left:49vw;transform:rotate(250deg);" class="matchstick" ontouchstart="SwitchObjectDragged(this.id, true)" ontouchend="SwitchObjectDragged(this.id, false)">
    </div>
    
    <style>
        body{
            overflow: hidden;
            margin:0;
        }
    
        #content{
            width: 100vw;
            height: 100vh;
        }
    
    
        .matchstick{
            position: absolute;
            width: 25vw;
            height: 3vw;
            cursor: pointer;
        }
    
    </style>
    
    <script>
        // --- DRAG n DROP ---
        var draggedObject = null;
        var objsel = null;
        var bonneAlumette;
        var vertical = 0;
        var horizontal = 0;
        var nbsel = 0;
    
        document.ontouchmove = FollowCursorPosition;
    
        function FollowCursorPosition(event){
            //	var selected = draggedObject.id;
                if (draggedObject.id == objsel){
                    var e = event || window.event;
                    draggedObject.style.left = e.touches[0].clientX-(draggedObject.clientWidth/2);
                    draggedObject.style.top = e.touches[0].clientY-(draggedObject.clientHeight/2);
                }
            
        }
    
        function SwitchObjectDragged(objId, selected){
            if(!document.getElementById(objId).dataset.movable && nbsel<1)
            {
                objsel = objId;
                document.getElementById(objId).dataset.movable="true";
                nbsel++;
            }
            else if(document.getElementById(objId).dataset.movable)
            {
                objsel = objId;
            }
            if (!selected)
            {
                verif();
                draggedObject = null;
                return;
            }
                
            console.log(document.getElementById(objId).dataset.movable);
            if (document.getElementById(objId).dataset.movable)
            {
                draggedObject = document.getElementById(objId);
            }
        }
    
        function verif()
        {
            //34.5%
            //10,2%
    
            //get el by id
            bonneAlumette = document.getElementById('m5');
            bonneAlumette1 = document.getElementById('m6');
    
            console.log(bonneAlumette);
            console.log(bonneAlumette1);

            //get left et top
            vertical = parseInt(bonneAlumette.style.top);
            horizontal = parseInt(bonneAlumette.style.left);
            vertical1 = parseInt(bonneAlumette1.style.top);
            horizontal1 = parseInt(bonneAlumette1.style.left);
    
            console.log('vertical: '+vertical);
    
            console.log('horizontal: '+horizontal);

            console.log('vertical1: '+vertical1);
    
            console.log('horizontal1: '+horizontal1);
            //divise les deux pars la largeur du body
            vertical = vertical/window.innerWidth;
            horizontal = horizontal/window.innerWidth;

            vertical1 = vertical1/window.innerWidth;
            horizontal1 = horizontal1/window.innerWidth;
            //compare les valeurs
    
            console.log('vertical div : '+vertical);
    
            console.log('horizontal div : '+horizontal);
    
            if (vertical>0.60 && vertical<0.70 && horizontal>0.40 && horizontal<0.50 || vertical1>0.60 && vertical1<0.70 && horizontal1>0.40 && horizontal1<0.50)
            {
                console.log('BRAVO le VEAU')
                alert('BRAVO le VEAU');
            }
        }
    </script>