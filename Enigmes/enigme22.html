<link rel="stylesheet" type="text/css" href="../css/default.css">


<div class="parchemin"> 
    <p>Déplacez deux bouts de bois pour former deux carrés.</p>
    </div>
    
    <div id="content" style="display: flex;">
        <img src="../Images/allumette.png" id="m1" style="top:60vw;left:14vw;transform:rotate(0deg);" class="matchstick" ontouchstart="SwitchObjectDragged(this.id, true)" ontouchend="SwitchObjectDragged(this.id, false)">
        <img src="../Images/allumette.png" id="m2" style="top:60vw;left:40vw;transform:rotate(0deg);" class="matchstick" ontouchstart="SwitchObjectDragged(this.id, true)" ontouchend="SwitchObjectDragged(this.id, false)">
        <img src="../Images/allumette.png" id="m3" style="top:60vw;left:66vw;transform:rotate(0deg);" class="matchstick" ontouchstart="SwitchObjectDragged(this.id, true)" ontouchend="SwitchObjectDragged(this.id, false)">
        <img src="../Images/allumette.png" id="m4" style="top:75vw;left:81vw;transform:rotate(90deg);" class="matchstick" ontouchstart="SwitchObjectDragged(this.id, true)" ontouchend="SwitchObjectDragged(this.id, false)">
        <img src="../Images/allumette.png" id="m5" style="top:102vw;left:81vw;transform:rotate(90deg);" class="matchstick" ontouchstart="SwitchObjectDragged(this.id, true)" ontouchend="SwitchObjectDragged(this.id, false)">
        <img src="../Images/allumette.png" id="m6" style="top:128vw;left:81vw;transform:rotate(90deg);" class="matchstick" ontouchstart="SwitchObjectDragged(this.id, true)" ontouchend="SwitchObjectDragged(this.id, false)">
        <img src="../Images/allumette.png" id="m7" style="top:140vw;left:66vw;transform:rotate(180deg);" class="matchstick" ontouchstart="SwitchObjectDragged(this.id, true)" ontouchend="SwitchObjectDragged(this.id, false)">
        <img src="../Images/allumette.png" id="m8" style="top:140vw;left:40vw;transform:rotate(180deg);" class="matchstick" ontouchstart="SwitchObjectDragged(this.id, true)" ontouchend="SwitchObjectDragged(this.id, false)">
        <img src="../Images/allumette.png" id="m9" style="top:140vw;left:14vw;transform:rotate(180deg);" class="matchstick" ontouchstart="SwitchObjectDragged(this.id, true)" ontouchend="SwitchObjectDragged(this.id, false)">
        <img src="../Images/allumette.png" id="m10" style="top:128vw;left:-2vw;transform:rotate(-90deg);" class="matchstick" ontouchstart="SwitchObjectDragged(this.id, true)" ontouchend="SwitchObjectDragged(this.id, false)">
        <img src="../Images/allumette.png" id="m11" style="top:102vw;left:-2vw;transform:rotate(-90deg);" class="matchstick" ontouchstart="SwitchObjectDragged(this.id, true)" ontouchend="SwitchObjectDragged(this.id, false)">
        <img src="../Images/allumette.png" id="m12" style="top:87vw;left:10vw;transform:rotate(0deg);" class="matchstick" ontouchstart="SwitchObjectDragged(this.id, true)" ontouchend="SwitchObjectDragged(this.id, false)">
        <img src="../Images/allumette.png" id="m13" style="top:125vw;left:55vw;transform:rotate(-90deg);" class="matchstick" ontouchstart="SwitchObjectDragged(this.id, true)" ontouchend="SwitchObjectDragged(this.id, false)">
        <img src="../Images/allumette.png" id="m14" style="top:102vw;left:23vw;transform:rotate(90deg);" class="matchstick" ontouchstart="SwitchObjectDragged(this.id, true)" ontouchend="SwitchObjectDragged(this.id, false)">
    </div>

    
    
    <style>
        body{
            overflow: hidden;
            margin:0;
        }    
    
        .matchstick{
            position: absolute;
            width: 25vw;
            height: 3vw;
            cursor: pointer;
            user-drag: none; 
            user-select: none;
            -moz-user-select: none;
            -webkit-user-drag: none;
            -webkit-user-select: none;
            -ms-user-select: none;
        }
    
    </style>
    
    <script>
    
        // --- DRAG n DROP ---
        var draggedObject = null;
        var objsel = null;
        var bonneAlumette;
        var vertical =0;
        var horizontal= 0;
        var nbsel =0;
    
        document.ontouchmove = FollowCursorPosition;
    
        function FollowCursorPosition(event){
            //	var selected = draggedObject.id;
            
    
            if (draggedObject && draggedObject.id == objsel){
                var e = event || window.event;
                draggedObject.style.left = e.touches[0].clientX -(draggedObject.clientWidth/2);
                draggedObject.style.top = e.touches[0].clientY -(draggedObject.clientHeight/2);
            }
            
        }
    
        function SwitchObjectDragged(objId, selected){
    
            if(!document.getElementById(objId).dataset.movable && nbsel<2)
            {
                objsel = objId;
                document.getElementById(objId).dataset.movable="true";
                nbsel++;
            }
            else if(document.getElementById(objId).dataset.movable)
            {
                objsel = objId;
            }
            if (!selected)
            {
                //console.log('coucou');
                verif();
                draggedObject = null;
                return;
                
            }
                
            console.log(document.getElementById(objId).dataset.movable);
            if (document.getElementById(objId).dataset.movable)
            {
                draggedObject = document.getElementById(objId);
            }
    
            
        }
    
        function verif()
        {
            //34.5%
            //10,2%
    
            //get el by id
            bonneAlumette = document.getElementById('m13');
            bonneAlumette1 = document.getElementById('m14');
    
            console.log(bonneAlumette);
            //get left et top
            vertical = parseInt(bonneAlumette.style.top);
            horizontal = parseInt(bonneAlumette.style.left);
            vertical1 = parseInt(bonneAlumette1.style.top);
            horizontal1 = parseInt(bonneAlumette1.style.left);
    
            console.log('vertical: '+vertical);
    
            console.log('horizontal: '+horizontal);
            //divise les deux pars la largeur du body
            vertical = vertical/window.innerWidth;
            horizontal = horizontal/window.innerWidth;
            vertical1 = vertical1/window.innerWidth;
            horizontal1 = horizontal1/window.innerWidth;
            //compare les valeurs
    
            console.log('vertical div : '+vertical);
    
            console.log('horizontal div : '+horizontal);

            console.log('vertical1 div : '+vertical1);
    
            console.log('horizontal1 div : '+horizontal1);
    
            if (vertical>0.70&& vertical<0.80 && horizontal>0.20 && horizontal<0.30 && vertical1>0.6 && vertical1<0.8 && horizontal1>-0.03 && horizontal1<-0.01)
            {
                    console.log('BRAVO le VEAU')
                    alert('BRAVO le VEAU');
            }

            if (vertical1 > 0.70 && vertical1 < 0.80 && horizontal1 > 0.20 && horizontal1 < 0.30 && vertical > 0.6 && vertical < 0.8 && horizontal > -0.03 && horizontal < -0.01)
            {
                console.log('BRAVO le VEAU')
                alert('BRAVO le VEAU');
            }

         

              
        }
    
    
    
    </script>